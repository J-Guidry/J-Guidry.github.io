{"version":3,"sources":["live/todolist/script.js"],"names":["todoList","todos","createStorage","localStorage","setItem","JSON","stringify","getTodos","todoStorage","parse","getItem","todoArr","setTodos","addTodo","todoText","push","completed","changeTodo","position","deleteTodo","splice","toggleCompleted","todo","toggleAll","totalTodos","length","completedTodos","forEach","view","displayTodos","todosUl","document","querySelector","innerHTML","undefined","todoLi","createElement","todoTextWithCompletion","classList","toggle","id","appendChild","createDeleteIcon","deleteIcon","className","value","changeTextToEdit","input","textContent","maxLength","parentNode","replaceChild","focus","changeEditToText","getInput","addTodoTextInput","getElementById","remove","uncompleted","icon","childNodes","listItems","controller","setEventListeners","addEventListener","event","editTodo","which","elementClicked","target","todoIndex","keyCode","blur","parseInt","checked","init"],"mappings":"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","file":"script.4627aaa8.js","sourceRoot":"..\\src","sourcesContent":["// require('~bootstrap/dist/css/bootstrap.min.css');\r\n\r\n// Todo List\r\n\r\n//Data\r\nvar todoList = {\r\n  todos: [],\r\n  createStorage: function(){\r\n    localStorage.setItem(\"todoArray\", JSON.stringify(todoList.todos));\r\n  },\r\n  getTodos: function(){\r\n    var todoStorage = JSON.parse(localStorage.getItem(\"todoArray\"));  \r\n    todoArr = todoStorage;\r\n    return todoArr;\r\n  },\r\n  setTodos: function(todoArr){\r\n    localStorage.setItem(\"todoArray\",JSON.stringify(todoArr));\r\n  },\r\n  addTodo: function(todoText){\r\n    this.getTodos();\r\n    todoArr.push({\r\n      todoText: todoText,\r\n      completed: false\r\n    });\r\n    this.setTodos(todoArr);\r\n  }, \r\n  changeTodo: function(position, todoText){\r\n    this.getTodos();\r\n    todoArr[position].todoText = todoText;\r\n    this.setTodos(todoArr);\r\n  },\r\n  deleteTodo: function(position){\r\n    this.getTodos();\r\n    todoArr.splice(position, 1);\r\n    this.setTodos(todoArr);\r\n  },  \r\n  toggleCompleted: function(position){\r\n    this.getTodos();\r\n    var todo = todoArr[position];\r\n    todo.completed = !todo.completed;\r\n    this.setTodos(todoArr);\r\n  },\r\n  toggleAll: function(){\r\n    this.getTodos();\r\n    var totalTodos = todoArr.length;\r\n    var completedTodos = 0;  \r\n\r\n    //Get number of completed todos\r\n    todoArr.forEach(function(todo){\r\n      if(todo.completed === true){\r\n        completedTodos++;\r\n      }\r\n    });\r\n    todoArr.forEach(function(todo){\r\n      // Case 1: If everything's true, make everything false\r\n      if(completedTodos === totalTodos){\r\n        todo.completed = false;\r\n      } else {\r\n        // Case 2: Otherwise, make everything true\r\n        todo.completed = true;\r\n      }\r\n    });\r\n    this.setTodos(todoArr);\r\n    }\r\n  };\r\n\r\n  \r\nvar view = {\r\n  displayTodos: function(){ //render\r\n    var todosUl = document.querySelector(\"#todolist\");\r\n    todosUl.innerHTML = \"\";\r\n    var toggleIcon = \"<i class='fa fa-circle-o fa-lg'></i>\";\r\n    var completedIcon = \"<i class='fa fa-check-circle-o fa-lg'></i>\";\r\n\r\n    todoList.getTodos();\r\n    if (todoArr == undefined || null){\r\n      todoList.createStorage();\r\n    }\r\n    todoArr.forEach(function(todo, position){\r\n      var todoLi = document.createElement(\"li\");\r\n      var todoTextWithCompletion = \"\";\r\n\r\n      if(todo.completed === true){\r\n        todoTextWithCompletion = completedIcon + todo.todoText;\r\n        todoLi.classList.toggle(\"completed\");\r\n      } else {\r\n        todoTextWithCompletion = toggleIcon + todo.todoText;\r\n      }\r\n\r\n      todoLi.id = position;\r\n      todoLi.innerHTML = todoTextWithCompletion;\r\n      todoLi.appendChild(this.createDeleteIcon());\r\n      todosUl.appendChild(todoLi);\r\n    }, this);\r\n\r\n    todoList.setTodos(todoArr);\r\n  },\r\n  createDeleteIcon: function(){\r\n    var deleteIcon = document.createElement(\"i\");\r\n    deleteIcon.id = \"delete\";\r\n    deleteIcon.className = \"fa fa-times fa-lg\";\r\n    return deleteIcon;\r\n  },\r\n  addTodo: function(value){\r\n    var todosUl = document.querySelector(\"#todolist\");\r\n    var toggleIcon = \"<i class='fa fa-circle-o fa-lg'></i>\";\r\n    var todoLi = document.createElement(\"li\");\r\n    var todoTextWithCompletion = \"\";\r\n    todoTextWithCompletion = toggleIcon + value;\r\n    todoLi.innerHTML = todoTextWithCompletion;\r\n    todoLi.appendChild(this.createDeleteIcon());\r\n    todosUl.appendChild(todoLi);\r\n  },\r\n  changeTextToEdit: function(todoText){\r\n    var input = document.createElement(\"input\");\r\n    input.value = todoText.textContent;\r\n    input.maxLength = \"22\";\r\n    todoText.parentNode.replaceChild(input,todoText);\r\n    input.id = \"input\";\r\n    input.focus();\r\n    return input;\r\n  },\r\n  changeEditToText: function(todoText, input){\r\n    input.parentNode.replaceChild(todoText, input); \r\n  },\r\n  getInput: function(){\r\n    var addTodoTextInput = document.getElementById(\"addTodoTextInput\").value; \r\n    return addTodoTextInput;\r\n  },\r\n  deleteTodo: function(todo){\r\n    todo.remove();\r\n  },\r\n  toggleCompleted: function(todo, completed, uncompleted){\r\n    icon = document.createElement(\"i\");\r\n    if(!(todo.className === \"completed\")){\r\n      icon.className = completed;\r\n      todo.replaceChild(icon, todo.childNodes[0]);\r\n      todo.classList.toggle(\"completed\");\r\n    } else{\r\n      icon.className = uncompleted;\r\n      todo.replaceChild(icon, todo.childNodes[0]);\r\n      todo.classList.toggle(\"completed\");\r\n    }\r\n  },\r\n  toggleAll: function(listItems, completed, uncompleted){\r\n    listItems.forEach(function(todo){\r\n      icon = document.createElement(\"i\");\r\n      if(!(todo.className === \"completed\")){\r\n        icon.className = completed;\r\n        todo.replaceChild(icon, todo.childNodes[0]);\r\n        todo.classList.toggle(\"completed\");\r\n      } else{\r\n        icon.className = uncompleted;\r\n        todo.replaceChild(icon, todo.childNodes[0]);\r\n        todo.classList.toggle(\"completed\");\r\n      }\r\n    });\r\n  }\r\n};\r\n\r\nvar controller = {\r\n  setEventListeners: function(){\r\n    var todosUl = document.querySelector(\"#todolist\");\r\n    var addTodo = document.querySelector(\"#addTodoTextInput\");\r\n    var checked = \"fa fa-check-circle-o fa-lg\";\r\n    var unchecked = \"fa fa-circle-o fa-lg\";\r\n\r\n    todosUl.addEventListener(\"click\", function(event){\r\n      controller.deleteTodo(event);\r\n      controller.toggleCompleted(event);\r\n    });\r\n          \r\n    todosUl.addEventListener(\"dblclick\", this.editTodo);\r\n\r\n    addTodo.addEventListener(\"keydown\", function(event){\r\n      if(event.which === 13){\r\n        controller.addTodo(event);\r\n      }\r\n    });\r\n  },\r\n  addTodo: function(event){\r\n    var input = view.getInput();\r\n    todoList.addTodo(input);\r\n    addTodoTextInput.value = '';\r\n    view.addTodo(input);   \r\n    //view.displayTodos();\r\n  },\r\n  editTodo: function(event){  \r\n    var elementClicked = event.target;\r\n    var todoText = elementClicked.childNodes[1];\r\n    if (todoText) {\r\n      var input = view.changeTextToEdit(todoText);       \r\n      input.addEventListener(\"keydown\", function(event){\r\n        var todoIndex = elementClicked.id;\r\n\r\n        if (event.which === 13 || event.keyCode === 13){\r\n          todoText.textContent = input.value;\r\n          this.blur();\r\n          todoList.changeTodo(parseInt(todoIndex),input.value);//data change\r\n        } else if (event.which === 27 || event.keyCode === 27){\r\n          this.blur();\r\n        }\r\n      }); \r\n      input.addEventListener(\"blur\", function(event){\r\n        view.changeEditToText(todoText, input);\r\n      })\r\n    }\r\n\r\n  },\r\n  deleteTodo: function(event){\r\n    var elementClicked = event.target;\r\n    var todoIndex = elementClicked.parentNode.id;\r\n    \r\n    if(elementClicked.id === \"delete\"){\r\n      todoList.deleteTodo(todoIndex);\r\n      view.deleteTodo(elementClicked.parentNode);\r\n    }\r\n  },\r\n  toggleCompleted: function(todoIndex){\r\n    var checked = \"fa fa-check-circle-o fa-lg\";\r\n    var unchecked = \"fa fa-circle-o fa-lg\";\r\n    var elementClicked = event.target;\r\n    var todoIndex = elementClicked.parentNode.id;\r\n    if(elementClicked.className === unchecked\r\n      || elementClicked.className === checked){\r\n        todoList.toggleCompleted(parseInt(todoIndex));\r\n        view.toggleCompleted(elementClicked.parentNode, checked, unchecked);\r\n    }\r\n  },\r\n  toggleAll: function(){\r\n    var checked = \"fa fa-check-circle-o fa-lg\";\r\n    var unchecked = \"fa fa-circle-o fa-lg\";\r\n    todoList.toggleAll();\r\n    var todosUl = document.querySelector(\"#todolist\");\r\n    view.toggleAll(todosUl.childNodes, checked, unchecked);\r\n  },\r\n  init: function(){\r\n    controller.setEventListeners();\r\n\r\n    view.displayTodos();\r\n  }\r\n};\r\n\r\ncontroller.init();\r\n"]}